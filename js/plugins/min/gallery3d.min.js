!function(a,b){"use strict";function c(b,d){this.el=b,this.options=a.extend({},c.options,d),this.init()}c.options={directionNav:!1,showSelectFx:!1,defaultFx:"fxRotateSoftly",selectFxOptions:{fxCorner:"Corner scale",fxVScale:"Vertical scale",fxFall:"Fall",fxFPulse:"Forward pulse",fxRPulse:"Rotate pulse",fxHearbeat:"Hearbeat",fxCoverflow:"Coverflow",fxRotateSoftly:"Rotate me softly",fxDeal:"Deal 'em",fxFerris:"Ferris wheel",fxShinkansen:"Shinkansen",fxSnake:"Snake",fxVacuum:"Vacuum"}},c.prototype={init:function(){var c=this;c.docElem=b.document.documentElement;var d=c.el.parent(".section");c.body=a("body").add(d).addClass("gallery3d"),c.gridWrap=c.el.children(".grid-wrap"),c.grid=c.gridWrap.children(".grid"),c.gridItems=c.grid.children("figure"),c.itemSize={width:c.gridItems.width(),height:c.gridItems.height()},c.contentEl=c.el.children(".content-grid"),c.items=c.contentEl.children(".grid-item"),c.extraCell=c.items.children(".extra-cell"),c.current=0,c.itemsCount=c.items.length,c.isAnimate=!1,c.close=c.contentEl.children(".close-content"),c.loader=c.contentEl.children(".loading"),c.touch=Modernizr.touch,c.support=Modernizr.pointerevents&&Modernizr.csstransitions&&Modernizr.csstransforms3d,c.options.directionNav&&c.directionNav.init(c),c.options.showSelectFx&&c.showSelect.init(c),c.initEvents()},initEvents:function(){var c=this;c.gridItems.on("click",function(b){b.preventDefault();var d=a(this).index();c._showContent(d)}),c.close.on("click",function(a){a.preventDefault(),c._hideContent()}),c.extraCell.on("click",function(){c.close.trigger("click")}),c.support&&(a(b).on("resize",function(){c._resizeHandler()}),a(b).on("scroll",function(){c.isAnimating?b.scrollTo(c.scrollPosition?c.scrollPosition.x:0,c.scrollPosition?c.scrollPosition.y:0):(c.scrollPosition={x:b.pageXOffset||c.docElem.scrollLeft,y:b.pageYOffset||c.docElem.scrollTop},c._scrollHandler())}))},navigate:function(b){var c=this;if(c.isAnimate)return!1;c.isAnimate=!0;var d=0,e=c.items.eq(c.current),f=c.current;"next"===b?c.current=c.current<c.itemsCount-1?c.current+1:0:"prev"===b&&(c.current=c.current>0?c.current-1:c.itemsCount-1);var g=c.current,h=c.items.eq(g),i=function(){a(this).removeClass("current"),c.gridItems.eq(f).removeClass("active"),a(this).removeClass("next"===b?"navOutNext":"navOutPrev"),++d,2===d&&(c.isAnimate=!1)},j=function(){a(this).addClass("current"),c.gridItems.eq(c.current).addClass("active"),a(this).removeClass("next"===b?"navInNext":"navInPrev"),++d,2===d&&(c.isAnimate=!1)};c.support?(e.one(c.animEndEventNames(),i),h.one(c.animEndEventNames(),j)):(i(),j()),e.addClass("next"===b?"navOutNext":"navOutPrev"),h.addClass("next"===b?"navInNext":"navInPrev"),c.replaceContent(g)},_showContent:function(b){if(this.isAnimating)return!1;this.isAnimating=!0;var c=this,d=function(){setTimeout(function(){c.loader.removeClass("show"),c.options.directionNav!==!1&&c.nav.removeClass("show"),c.options.showSelectFx!==!1&&c.customSelect.removeClass("show"),c.items.eq(b).addClass("current")},1e3),c.contentEl.addClass("show"),c.loader.addClass("show"),c.options.directionNav!==!1&&c.nav.addClass("show"),c.options.showSelectFx!==!1&&c.customSelect.addClass("show"),c.body.addClass("noscroll"),c.isAnimating=!1};if(!c.support)return d(),!1;c.current=b;var e=this.gridItems.eq(b),f=c.returnContent(e);this.placeholder=this.createPlaceholder(e,f),this.placeholder.appendTo(this.grid);var g=function(){e.addClass("active"),c.gridWrap.addClass("view-full"),c._resizePlaceholder(),c.resizeImage();var b=function(){a(this).off(c.transEndEventName(),b),d()};c.placeholder.on(c.transEndEventName(),b)};setTimeout(g,25)},returnContent:function(a){return a.find("img").clone()},replaceContent:function(a){var b=this.gridItems.eq(a);this.front.html(this.returnContent(b))},_hideContent:function(){var a=this,b=a.contentEl.children(".current"),c=a.gridItems.eq(b.index());if(b.removeClass("current"),a.contentEl.removeClass("show"),setTimeout(function(){a.body.removeClass("noscroll")},25),!a.support)return!1;a.gridWrap.removeClass("view-full"),a.placeholder.css({left:c.get(0).offsetLeft,top:c.get(0).offsetTop,width:a.itemSize.width,height:a.itemSize.height});var d=function(){a.placeholder.remove(),c.removeClass("active")};a.placeholder.one(a.transEndEventName(),d)},directionNav:{init:function(a){var b=this;b.createNav(a),b.addListener(a)},createNav:function(b){b.nav=a("<nav/>",{"class":"direction-nav"}),b.navPrev=a("<a/>",{"class":"prev-item",html:"Previous item",href:"#"}),b.navNext=a("<a/>",{"class":"next-item",html:"Next item",href:"#"}),b.nav.append(b.navPrev.add(b.navNext)),b.contentEl.append(b.nav)},addListener:function(a){a.navPrev.on("click",function(b){b.preventDefault(),a.navigate("prev")}),a.navNext.on("click",function(b){b.preventDefault(),a.navigate("next")})}},showSelect:{init:function(a){var b=this;b.show.call(a),b.addListener.call(a)},addListener:function(){var b=this;b.selectFx.on("change",function(){var c=a(this),d=c.val();b.el.removeClass(),"-1"!==d&&b.el.addClass(d)})},show:function(){var b=this;if(b.selectFx=a("<select/>",{id:"fxselect"}),b.customSelect=a('<div class="custom-select"/>').append(b.selectFx),b.options.selectFxOptions){var c='<option value="-1" selected>Choose an effect...</option>';a.each(b.options.selectFxOptions,function(a,b){c+='<option value="'+a+'">'+b+"</option>"}),b.selectFx.append(c)}b.contentEl.append(b.customSelect)}},scrollX:function(){return b.pageXOffset||this.docElem.scrollLeft},scrollY:function(){return b.pageYOffset||this.docElem.scrollTop},getViewportW:function(){var a=this.docElem.clientWidth,c=b.innerWidth;return c>a?c:a},getViewportH:function(){var a=this.docElem.clientHeight,c=b.innerHeight;return c>a?c:a},transEndEventName:function(){var a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};return a[Modernizr.prefixed("transition")]},animEndEventNames:function(){var a={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"};return a[Modernizr.prefixed("animation")]},createPlaceholder:function(b,c){var d=this;d.front=a("<div/>",{"class":"front",html:c});var e=a("<div/>",{"class":"back",html:"&nbsp;"}),f=a("<div/>",{"class":"placeholder"}).append(d.front).append(e);return f.css({left:b.position().left,top:b.position().top,width:d.itemSize.width,height:d.itemSize.height}),f},_scrollPage:function(){var a=this.scrollY()+this.getViewportH()/2;this.gridWrap.css({WebkitPerspectiveOrigin:"50%"+a+"px",MozPerspectiveOrigin:"50%"+a+"px",perspectiveOrigin:"50%"+a+"px"}),this.didScroll=!1},_resizeHandler:function(){function a(){b._resizePlaceholder(),b._scrollPage(),b._resizeTimeout=null}var b=this;b.resizeImage(),this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(a,50)},_resizePlaceholder:function(){this.itemSize={width:this.gridItems.width(),height:this.gridItems.height()},this.placeholder&&this.placeholder.css({left:Number(-1*(this.grid.position().left-this.scrollX()))+"px",top:Number(-1*(this.grid.position().top-this.scrollY()))+"px",width:this.getViewportW()+"px",height:this.getViewportH()+"px"})},resizeImage:function(){var c=this,d=c.items.find("img");if(d){if(c.touch){var e=document.documentElement.clientWidth/b.innerWidth,f=b.innerHeight*e;c.wH=f}else c.wH=a(b).height();var g=parseInt(d.css("padding-top"),10)+parseInt(d.css("padding-bottom"),10);d.css("max-height",c.wH-g)}},_scrollHandler:function(){var a=this;this.didScroll||(this.didScroll=!0,setTimeout(function(){a._scrollPage()},60))}},b.gallery3d=c}(jQuery,window);